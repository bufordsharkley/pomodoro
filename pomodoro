#! /usr/bin/env python3

import contextlib
import os

import base



@contextlib.contextmanager
def pomodoro_lock():
  lock_path = '/tmp/pomodoro'
  if os.path.exists(lock_path):
    raise RuntimeError('Currently locked')
  with open(lock_path, 'w') as f:
    f.write(str(os.getpid()))
  try:
    yield
  finally:
    os.remove(lock_path)


def run_pomodoro_forever():
  pom = base.Pomodoro()
  pom.run_forever()


if __name__ == "__main__":
  #with pomodoro_lock():
  run_pomodoro_forever()
